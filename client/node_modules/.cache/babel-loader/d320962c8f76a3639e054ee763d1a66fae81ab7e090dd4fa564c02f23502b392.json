{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nconst useAuth = () => {\n  _s();\n  const navigate = useNavigate();\n  const [cookies, removeCookie] = useCookies([]);\n  const [authenticated, setAuthenticated] = useState(false);\n  const [username, setUsername] = useState('');\n  useEffect(() => {\n    const verifyCookie = async () => {\n      if (!cookies.token) {\n        navigate('/login');\n      }\n      try {\n        const {\n          data\n        } = await axios.post('http://localhost:4000', {}, {\n          withCredentials: true\n        });\n        const {\n          status,\n          user\n        } = data;\n        if (status) {\n          setAuthenticated(true);\n          setUsername(user);\n        } else {\n          removeCookie('token');\n          navigate('/login');\n        }\n      } catch (error) {\n        console.error('Authentication error:', error);\n        removeCookie('token');\n        navigate('/login');\n      }\n    };\n    verifyCookie();\n  }, [cookies, navigate, removeCookie]);\n  return {\n    authenticated,\n    username\n  };\n};\n_s(useAuth, \"Og/+W0tU+VTuBLb9XwvrMWW1vio=\", false, function () {\n  return [useNavigate, useCookies];\n});\nexport default useAuth;","map":{"version":3,"names":["useEffect","useState","useNavigate","useCookies","axios","useAuth","_s","navigate","cookies","removeCookie","authenticated","setAuthenticated","username","setUsername","verifyCookie","token","data","post","withCredentials","status","user","error","console"],"sources":["C:/Users/Natarajan/Desktop/free/client/src/pages/IsAuth.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useCookies } from 'react-cookie';\r\nimport axios from 'axios';\r\n\r\nconst useAuth = () => {\r\n  const navigate = useNavigate();\r\n  const [cookies, removeCookie] = useCookies([]);\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n  const [username, setUsername] = useState('');\r\n\r\n  useEffect(() => {\r\n    const verifyCookie = async () => {\r\n      if (!cookies.token) {\r\n        navigate('/login');\r\n      }\r\n\r\n      try {\r\n        const { data } = await axios.post(\r\n          'http://localhost:4000',\r\n          {},\r\n          { withCredentials: true }\r\n        );\r\n\r\n        const { status, user } = data;\r\n\r\n        if (status) {\r\n          setAuthenticated(true);\r\n          setUsername(user);\r\n        } else {\r\n          removeCookie('token');\r\n          navigate('/login');\r\n        }\r\n      } catch (error) {\r\n        console.error('Authentication error:', error);\r\n        removeCookie('token');\r\n        navigate('/login');\r\n      }\r\n    };\r\n\r\n    verifyCookie();\r\n  }, [cookies, navigate, removeCookie]);\r\n\r\n  return { authenticated, username };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACM,OAAO,EAAEC,YAAY,CAAC,GAAGN,UAAU,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACO,aAAa,EAAEC,gBAAgB,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,MAAMc,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI,CAACN,OAAO,CAACO,KAAK,EAAE;QAClBR,QAAQ,CAAC,QAAQ,CAAC;MACpB;MAEA,IAAI;QACF,MAAM;UAAES;QAAK,CAAC,GAAG,MAAMZ,KAAK,CAACa,IAAI,CAC/B,uBAAuB,EACvB,CAAC,CAAC,EACF;UAAEC,eAAe,EAAE;QAAK,CAC1B,CAAC;QAED,MAAM;UAAEC,MAAM;UAAEC;QAAK,CAAC,GAAGJ,IAAI;QAE7B,IAAIG,MAAM,EAAE;UACVR,gBAAgB,CAAC,IAAI,CAAC;UACtBE,WAAW,CAACO,IAAI,CAAC;QACnB,CAAC,MAAM;UACLX,YAAY,CAAC,OAAO,CAAC;UACrBF,QAAQ,CAAC,QAAQ,CAAC;QACpB;MACF,CAAC,CAAC,OAAOc,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CZ,YAAY,CAAC,OAAO,CAAC;QACrBF,QAAQ,CAAC,QAAQ,CAAC;MACpB;IACF,CAAC;IAEDO,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACN,OAAO,EAAED,QAAQ,EAAEE,YAAY,CAAC,CAAC;EAErC,OAAO;IAAEC,aAAa;IAAEE;EAAS,CAAC;AACpC,CAAC;AAACN,EAAA,CAvCID,OAAO;EAAA,QACMH,WAAW,EACIC,UAAU;AAAA;AAuC5C,eAAeE,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}